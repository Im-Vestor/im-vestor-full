generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Answer {
  id                String           @id
  answer            String
  questionId        String
  knowYourNumbersId String?
  KnowYourNumbers   KnowYourNumbers? @relation(fields: [knowYourNumbersId], references: [id])
}

model Area {
  id        String      @id
  name      String
  Project   Project[]
  Incubator Incubator[]
  Investor  Investor[]
  VcGroup   VcGroup[]
}

model Connection {
  id                                String   @id
  createdAt                         DateTime @default(now())
  followerId                        String
  followingId                       String
  User_Connection_followerIdToUser  User     @relation("Connection_followerIdToUser", fields: [followerId], references: [id])
  User_Connection_followingIdToUser User     @relation("Connection_followingIdToUser", fields: [followingId], references: [id])

  @@unique([followerId, followingId])
}

model Country {
  id           Int            @id @default(autoincrement())
  name         String
  numericCode  String
  emoji        String
  Entrepreneur Entrepreneur[]
  Incubator    Incubator[]
  Investor     Investor[]
  Project      Project[]
  State        State[]
  VcGroup      VcGroup[]
}

model Entrepreneur {
  id               String           @id
  firstName        String
  lastName         String
  mobileFone       String?
  companyName      String?
  companyRole      String?
  fiscalCode       String?
  birthDate        DateTime?
  photo            String?
  banner           String?
  about            String?
  userId           String           @unique
  stateId          Int?
  countryId        Int?
  personalPitchUrl String?
  linkedinUrl      String?
  Country          Country?         @relation(fields: [countryId], references: [id])
  State            State?           @relation(fields: [stateId], references: [id])
  User             User             @relation(fields: [userId], references: [id])
  Meeting          Meeting[]
  PreferredHours   PreferredHours[]
  Project          Project[]
}

model File {
  id        String   @id
  name      String
  type      String
  size      Int
  url       String
  projectId String?
  Project   Project? @relation(fields: [projectId], references: [id])
}

model HyperTrainItem {
  id          String             @id
  name        String
  description String?
  image       String?
  link        String
  type        HyperTrainItemType
  createdAt   DateTime           @default(now())
  liveUntil   DateTime
  updatedAt   DateTime
  externalId  String             @unique
}

model Incubator {
  id                          String    @id
  name                        String
  bio                         String?
  description                 String?
  website                     String?
  logo                        String?
  phone                       String?
  email                       String
  openingDate                 DateTime?
  startupsIncubated           Int?
  startupsInIncubator         Int?
  acceptStartupsOutsideRegion Boolean   @default(false)
  brochureUrl                 String?
  ownerName                   String?
  ownerRole                   String?
  ownerPhone                  String?
  ownerEmail                  String?
  linkedinUrl                 String?
  facebook                    String?
  instagram                   String?
  twitter                     String?
  associatedIncubators        String?
  associatedUniversities      String?
  activePrograms              String?
  userId                      String    @unique
  stateId                     Int?
  countryId                   Int?
  Country                     Country?  @relation(fields: [countryId], references: [id])
  State                       State?    @relation(fields: [stateId], references: [id])
  User                        User      @relation(fields: [userId], references: [id])
  Project                     Project[]
  Area                        Area[]
  Offer                       Offer[]
  Meeting                     Meeting[] @relation("MeetingIncubators")
}

model IncubatorEntrepreneur {
  id          String    @id
  firstName   String
  lastName    String
  mobileFone  String?
  companyRole String?
  birthDate   DateTime?
  photo       String?
  about       String?
  linkedinUrl String?
  projectId   String
  Project     Project   @relation(fields: [projectId], references: [id])
}

model Investor {
  id                        String        @id
  firstName                 String
  lastName                  String
  mobileFone                String?
  fiscalCode                String?
  investmentMinValue        Float
  investmentMaxValue        Float
  birthDate                 DateTime?
  photo                     String?
  banner                    String?
  about                     String?
  currency                  Currency      @default(USD)
  userId                    String        @unique
  stateId                   Int?
  countryId                 Int?
  personalPitchUrl          String?
  linkedinUrl               String?
  Country                   Country?      @relation(fields: [countryId], references: [id])
  State                     State?        @relation(fields: [stateId], references: [id])
  User                      User          @relation(fields: [userId], references: [id])
  Negotiation               Negotiation[]
  ProjectView               ProjectView[]
  Area                      Area[]
  Project_FavoriteInvestors Project[]     @relation("FavoriteInvestors")
  Project_InvestedInvestors Project[]     @relation("InvestedInvestors")
  Meeting                   Meeting[]     @relation("MeetingInvestors")
}

model KnowYourNumbers {
  id        String   @id
  projectId String   @unique
  Answer    Answer[]
  Project   Project  @relation(fields: [projectId], references: [id])
}

model Meeting {
  id             String        @id
  createdAt      DateTime      @default(now())
  updatedAt      DateTime
  name           String
  url            String
  startDate      DateTime
  endDate        DateTime
  negotiationId  String?
  entrepreneurId String?
  Entrepreneur   Entrepreneur? @relation(fields: [entrepreneurId], references: [id])
  Negotiation    Negotiation?  @relation(fields: [negotiationId], references: [id])
  Incubator      Incubator[]   @relation("MeetingIncubators")
  Investor       Investor[]    @relation("MeetingInvestors")
  VcGroup        VcGroup[]     @relation("MeetingVcGroups")
}

model Negotiation {
  id                                String           @id
  createdAt                         DateTime         @default(now())
  updatedAt                         DateTime
  stage                             NegotiationStage @default(PITCH)
  investorActionNeeded              Boolean          @default(false)
  entrepreneurActionNeeded          Boolean          @default(false)
  investorAgreedToGoToNextStage     Boolean          @default(false)
  entrepreneurAgreedToGoToNextStage Boolean          @default(false)
  investorId                        String?
  projectId                         String
  vcGroupId                         String?
  Meeting                           Meeting[]
  Investor                          Investor?        @relation(fields: [investorId], references: [id])
  Project                           Project          @relation(fields: [projectId], references: [id])
  VcGroup                           VcGroup?         @relation(fields: [vcGroupId], references: [id])
}

model Notification {
  id         String           @id
  createdAt  DateTime         @default(now())
  type       NotificationType
  read       Boolean          @default(false)
  userId     String
  investorId String?
  User       User             @relation(fields: [userId], references: [id])
}

model Offer {
  id          String      @id
  name        String
  description String
  Incubator   Incubator[]
}

model Partner {
  id             String  @id
  firstName      String
  lastName       String
  companyName    String?
  mobileFone     String?
  userId         String  @unique
  companyLogoUrl String?
  photo          String?
  User           User    @relation(fields: [userId], references: [id])
}

model PotentialUser {
  id        String   @id
  name      String
  email     String
  phone     String?
  createdAt DateTime @default(now())
  event     String?
}

model PreferredHours {
  id             String               @id
  period         PreferredHoursPeriod
  time           String
  entrepreneurId String
  Entrepreneur   Entrepreneur         @relation(fields: [entrepreneurId], references: [id])
}

model Project {
  id                         String                  @id
  name                       String
  quickSolution              String?
  website                    String?
  foundationDate             DateTime?
  stage                      ProjectStage?
  about                      String?
  status                     ProjectStatus           @default(ACTIVE)
  startInvestment            Float?
  investorSlots              Int?
  annualRevenue              Float?
  monthsToReturn             Int?
  equity                     Float?
  investmentGoal             Float
  logo                       String?
  currency                   Currency                @default(USD)
  photo1                     String?
  photo2                     String?
  photo3                     String?
  photo4                     String?
  videoUrl                   String?
  createdAt                  DateTime                @default(now())
  updatedAt                  DateTime
  entrepreneurId             String?
  favoriteInvestorId         String?
  favoriteVcGroupId          String?
  investedInvestorId         String?
  investedVcGroupId          String?
  sectorId                   String
  countryId                  Int?
  stateId                    Int?
  incubatorId                String?
  visibility                 ProjectVisibility       @default(PRIVATE)
  socialImpactBeneficiaries  Int?
  socialImpactDescription    String?
  socialImpactMetrics        String?
  photo1Caption              String?
  photo2Caption              String?
  photo3Caption              String?
  photo4Caption              String?
  boostedUntil               DateTime?
  File                       File[]
  IncubatorEntrepreneur      IncubatorEntrepreneur[]
  KnowYourNumbers            KnowYourNumbers?
  Negotiation                Negotiation[]
  Country                    Country?                @relation(fields: [countryId], references: [id])
  Entrepreneur               Entrepreneur?           @relation(fields: [entrepreneurId], references: [id])
  Incubator                  Incubator?              @relation(fields: [incubatorId], references: [id])
  Area                       Area                    @relation(fields: [sectorId], references: [id])
  State                      State?                  @relation(fields: [stateId], references: [id])
  ProjectFaq                 ProjectFaq[]
  ProjectView                ProjectView[]
  Investor_FavoriteInvestors Investor[]              @relation("FavoriteInvestors")
  VcGroup_FavoriteVcGroups   VcGroup[]               @relation("FavoriteVcGroups")
  Investor_InvestedInvestors Investor[]              @relation("InvestedInvestors")
  VcGroup_InvestedVcGroups   VcGroup[]               @relation("InvestedVcGroups")
}

model ProjectFaq {
  id        String  @id
  question  String
  answer    String
  projectId String
  Project   Project @relation(fields: [projectId], references: [id])
}

model ProjectView {
  id         String    @id
  createdAt  DateTime  @default(now())
  investorId String?
  projectId  String
  vcGroupId  String?
  Investor   Investor? @relation(fields: [investorId], references: [id])
  Project    Project   @relation(fields: [projectId], references: [id])
  VcGroup    VcGroup?  @relation(fields: [vcGroupId], references: [id])
}

model Referral {
  id                             String   @id
  name                           String
  joinedAt                       DateTime @default(now())
  referrerId                     String
  referredId                     String
  User_Referral_referredIdToUser User     @relation("Referral_referredIdToUser", fields: [referredId], references: [id])
  User_Referral_referrerIdToUser User     @relation("Referral_referrerIdToUser", fields: [referrerId], references: [id])
}

model SiteContent {
  id          String   @id @default(uuid())
  key         String   @unique
  title       String
  contentHtml String
  updatedAt   DateTime @updatedAt
  createdAt   DateTime @default(now())
}

model State {
  id           Int            @id @default(autoincrement())
  name         String
  countryId    Int
  Entrepreneur Entrepreneur[]
  Incubator    Incubator[]
  Investor     Investor[]
  Project      Project[]
  Country      Country        @relation(fields: [countryId], references: [id])
  VcGroup      VcGroup[]
}

model SupportTicket {
  id                 String               @id
  createdAt          DateTime             @default(now())
  updatedAt          DateTime
  subject            String
  message            String
  status             SupportTicketStatus  @default(OPEN)
  userId             String
  User               User                 @relation(fields: [userId], references: [id])
  SupportTicketReply SupportTicketReply[]
}

model SupportTicketReply {
  id            String        @id
  createdAt     DateTime      @default(now())
  message       String
  adminId       String
  ticketId      String
  User          User          @relation(fields: [adminId], references: [id])
  SupportTicket SupportTicket @relation(fields: [ticketId], references: [id])
}

model User {
  id                                      String               @id
  email                                   String               @unique
  imageUrl                                String?
  referralCode                            String               @unique
  userType                                UserType
  availablePokes                          Int                  @default(0)
  stripeCustomerId                        String?
  availableBoosts                         Int                  @default(0)
  status                                  UserStatus           @default(ACTIVE)
  createdAt                               DateTime?            @default(now())
  updatedAt                               DateTime?            @default(now())
  Connection_Connection_followerIdToUser  Connection[]         @relation("Connection_followerIdToUser")
  Connection_Connection_followingIdToUser Connection[]         @relation("Connection_followingIdToUser")
  Entrepreneur                            Entrepreneur?
  Incubator                               Incubator?
  Investor                                Investor?
  Notification                            Notification[]
  Partner                                 Partner?
  Referral_Referral_referredIdToUser      Referral[]           @relation("Referral_referredIdToUser")
  Referral_Referral_referrerIdToUser      Referral[]           @relation("Referral_referrerIdToUser")
  SupportTicket                           SupportTicket[]
  SupportTicketReply                      SupportTicketReply[]
  VcGroup                                 VcGroup?
}

model VcGroup {
  id                       String          @id
  name                     String
  bio                      String?
  description              String?
  website                  String?
  email                    String
  logo                     String?
  phone                    String?
  openingDate              DateTime?
  managedCapital           Float?
  averageInvestmentSize    Float?
  brochureUrl              String?
  investmentPolicy         String?
  stages                   ProjectStage[]
  linkedinUrl              String?
  youtubeUrl               String?
  instagram                String?
  twitter                  String?
  principalStartups        String?
  principalExits           String?
  userId                   String          @unique
  stateId                  Int?
  countryId                Int?
  Negotiation              Negotiation[]
  ProjectView              ProjectView[]
  Country                  Country?        @relation(fields: [countryId], references: [id])
  State                    State?          @relation(fields: [stateId], references: [id])
  User                     User            @relation(fields: [userId], references: [id])
  VcGroupMember            VcGroupMember[]
  Area                     Area[]
  Project_FavoriteVcGroups Project[]       @relation("FavoriteVcGroups")
  Project_InvestedVcGroups Project[]       @relation("InvestedVcGroups")
  Meeting                  Meeting[]       @relation("MeetingVcGroups")
}

model VcGroupMember {
  id        String  @id
  name      String
  photo     String?
  role      String
  email     String
  phone     String?
  owner     Boolean @default(false)
  vcGroupId String
  VcGroup   VcGroup @relation(fields: [vcGroupId], references: [id])
}

enum Currency {
  EUR
  USD
  BRL
}

enum HyperTrainItemType {
  PROJECT
  INVESTOR
  NEWS
}

enum NegotiationStage {
  PITCH
  NEGOTIATION
  DETAILS
  CLOSED
  CANCELLED
}

enum NotificationType {
  PROJECT_VIEW
  MEETING_CREATED
  MEETING_CANCELLED
  NEGOTIATION_CREATED
  NEGOTIATION_CANCELLED
  NEGOTIATION_GO_TO_NEXT_STAGE
  POKE
  SUPPORT_TICKET_REPLY
  SUPPORT_TICKET_STATUS_UPDATED
  SUPPORT_TICKET_CREATED
  SUPPORT_TICKET_RECEIVED
}

enum PreferredHoursPeriod {
  MORNING
  AFTERNOON
  EVENING
}

enum ProjectStage {
  PRE_SEED
  SEED
  SERIES_A
  SERIES_B
  SERIES_C
  IPO
  SOCIAL_IMPACT
}

enum ProjectStatus {
  ACTIVE
  INACTIVE
  COMPLETED
}

enum ProjectVisibility {
  PUBLIC
  PRIVATE
}

enum SupportTicketStatus {
  OPEN
  CLOSED
}

enum UserStatus {
  ACTIVE
  INACTIVE
  PENDING_EMAIL_VERIFICATION
}

enum UserType {
  ENTREPRENEUR
  INVESTOR
  PARTNER
  VC_GROUP
  INCUBATOR
  ADMIN
}
